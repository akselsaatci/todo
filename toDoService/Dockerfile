FROM golang

ARG DATABASE_HOST
ENV DB_HOST=${DATABASE_HOST}

ARG DATABASE_PORT
ENV DB_PORT=${DATABASE_PORT}

ARG DATABASE_USER
ENV DB_USER=${DATABASE_USER}

ARG DATABASE_PASSWORD
ENV DB_PASSWORD=${DATABASE_PASSWORD}

ARG DATABASE_NAME
ENV DB_NAME=${DATABASE_NAME}

ARG SERVER_PORT
ENV PORT=${SERVER_PORT}

ARG AUTH_SERVICE_URL
ENV AUTH_SERVICE=${AUTH_SERVICE_URL}

RUN mkdir /app

ADD . /app

WORKDIR /app


RUN go build -o main ./cmd/main.go

EXPOSE 3000
CMD [ "/app/main" ]