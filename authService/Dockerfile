FROM golang

ARG DATABASE_HOST
ENV DB_HOST=${DATABASE_HOST}

ARG DATABASE_PORT
ENV DB_PORT=${DATABASE_PORT}

ARG DATABASE_USER
ENV DB_USER=${DATABASE_USER}

ARG DATABASE_PASSWORD
ENV DB_PASSWORD=${DATABASE_PASSWORD}

ARG DATABASE_NAME
ENV DB_NAME=${DATABASE_NAME}

ARG JWT_SECRET_KEY
ENV JWT_SECRET=${JWT_SECRET_KEY}

ARG SERVER_PORT
ENV PORT=${SERVER_PORT}


RUN mkdir /app

ADD . /app

WORKDIR /app

RUN go build -o main ./cmd/main.go

EXPOSE 8080
CMD [ "/app/main" ]